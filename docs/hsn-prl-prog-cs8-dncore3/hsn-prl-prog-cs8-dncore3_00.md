# 前言

Packt 几乎一年前首次联系我撰写这本书。这是一段漫长的旅程，有时比我预期的更艰难，我学到了很多。你现在拥有的这本书是许多漫长日子的结晶，我很自豪能最终呈现它。

撰写这本关于 C#的书对我意义重大，因为我一直梦想着写关于我职业生涯起步的语言。自从首次推出以来，C#确实有了长足的发展。.NET Core 实际上增强了 C#在开发者社区中的力量和声誉。

为了使这本书对广大读者有意义，我们将涵盖经典线程模型和**任务并行库**（**TPL**），并使用代码来解释它们。我们将首先研究使编写多线程代码成为可能的操作系统的基本概念。然后我们将仔细研究经典线程和 TPL 之间的区别。

在这本书中，我特别注意以现代最佳编程实践的背景来处理并行编程。示例被保持简短和简单，以便于您的理解。这些章节的写作方式使得即使您对它们没有太多先前的了解，也很容易学习这些主题。

希望您阅读这本书时能像我写作时一样享受。

# 这本书适合谁

这本书适用于希望学习多线程和并行编程概念，并希望在使用.NET Core 构建的企业应用程序中使用它们的 C#程序员。它还适用于希望了解现代硬件如何与并行编程配合的学生和专业人士。

假设您已经对 C#编程语言有一定了解，并且对操作系统的工作原理有一些基本知识。

# 这本书涵盖了什么

第一章，*并行编程简介*，介绍了多线程和并行编程的重要概念。本章包括操作系统如何发展以支持现代并行编程构造的内容。

第二章，*任务并行性*，演示了如何将程序分解为任务，以有效利用 CPU 资源和实现高性能。

第三章，*实现数据并行性*，侧重于使用并行循环实现数据并行性。本章还涵盖了扩展方法，以帮助实现并行性，以及分区策略。

第四章，*使用 PLINQ*，解释了如何利用 PLINQ 支持。这包括查询排序和取消查询，以及使用 PLINQ 的陷阱。

第五章，*同步原语*，介绍了 C#中用于处理多线程代码中共享资源的同步构造。

第六章，*使用并发集合*，描述了如何利用.NET Core 中可用的并发集合，而无需担心手动同步编码的工作。

第七章，*使用延迟初始化提高性能*，探讨了如何实现利用延迟模式的内置构造。

第八章，*异步编程简介*，探讨了如何在较早版本的.NET 中编写异步代码。

第九章，*异步、等待和基于任务的异步编程基础*，介绍了如何利用.NET Core 中的新构造来实现异步代码。

第十章，*使用 Visual Studio 调试任务*，着重介绍了 Visual Studio 2019 中可用的各种工具，使并行任务的调试更加容易。

第十一章，*编写并行和异步代码的单元测试用例*，介绍了在 Visual Studio 和.NET Core 中编写单元测试用例的各种方法。

第十二章，*ASP.NET Core 中的 IIS 和 Kestrel*，介绍了 IIS 和 Kestrel 的概念。本章还介绍了对异步流的支持。

第十三章，*并行编程中的模式*，解释了 C#语言中已经实现的各种模式。这还包括自定义模式实现。

第十四章，*分布式内存管理*，探讨了内存在分布式程序中的共享方式。

# 充分利用本书

您需要在系统上安装 Visual Studio 2019 以及.NET Core 3.1。同时也建议具备 C#和操作系统概念的基本知识。

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了本书，可以访问[www.packtpub.com/support](https://www.packtpub.com/support)注册并直接将文件发送到您的邮箱。

您可以按照以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择支持选项卡。

1.  点击代码下载。

1.  在搜索框中输入书名并按照屏幕上的说明操作。

文件下载后，请确保使用最新版本的解压缩或提取文件夹：

+   Windows 上的 WinRAR/7-Zip

+   Mac 上的 Zipeg/iZip/UnRarX

+   Linux 上的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Hands-On-Parallel-Programming-with-C-8-and-.NET-Core-3`](https://github.com/PacktPublishing/Hands-On-Parallel-Programming-with-C-8-and-.NET-Core-3)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还提供了来自我们丰富书籍和视频目录的其他代码包，可以在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上查看！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`static.packt-cdn.com/downloads/9781789132410_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789132410_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：指示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。这是一个例子：“将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。”

代码块设置如下：

```cs
private static void PrintNumber10Times()
{
   for (int i = 0; i < 10; i++)
     {
     Console.Write(1);
     }
   Console.WriteLine();
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```cs
private static void PrintNumber10Times()
{
   for (int i = 0; i < 10; i++)
     {
     Console.Write(1);
     }
   Console.WriteLine();
}
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种形式出现在文本中。这是一个例子：“与其自己找到最佳线程数，

我们可以把它留给**公共语言运行时**。

警告或重要说明会出现在这样的形式中。

提示和技巧会以这种形式出现。

# 联系我们

我们的读者反馈总是受欢迎的。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并发送邮件至`customercare@packtpub.com`。

勘误：尽管我们已经尽最大努力确保内容的准确性，但错误确实会发生。如果您在本书中发现错误，我们将不胜感激地希望您向我们报告。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书，点击勘误提交表格链接，并输入详细信息。

盗版：如果您在互联网上发现我们作品的任何非法副本，请向我们提供位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并附上材料链接。

**如果您有兴趣成为作者**：如果您在某个专题上有专业知识，并且有兴趣撰写或为一本书做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。在阅读并使用本书后，为什么不在购买它的网站上留下评论呢？潜在读者可以看到并使用您的客观意见来做出购买决定，我们在 Packt 可以了解您对我们产品的看法，我们的作者也可以看到您对他们书籍的反馈。谢谢！

有关 Packt 的更多信息，请访问[packt.com](http://www.packt.com/)。
