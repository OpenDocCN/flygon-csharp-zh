# 前言

本书的目的是让读者对现代软件开发中的模式有一个广泛的理解，同时通过具体示例深入了解更多细节。在开发解决方案时使用的模式数量是庞大的，而且通常开发人员在不知情的情况下使用模式。本书涵盖了从低级代码到在云中运行的解决方案中使用的高级概念的模式。

尽管许多所呈现的模式不需要特定的语言，但 C#和.NET Core 将用于许多示例。选择 C#和.NET Core 是因为它们的流行和设计，支持从简单的控制台应用程序到大型企业分布式系统的解决方案构建。

本书涵盖了大量的模式，是对许多模式的很好的介绍，同时允许对一组特定模式进行更深入、实践性的探讨。所涵盖的具体模式之所以被选择，是因为它们说明了特定的观点或模式的方面。提供了额外资源的参考，以便读者深入研究特别感兴趣的模式。

从简单的网站到大型企业分布式系统，正确的模式可以决定成功、长寿的解决方案和因性能不佳和成本高而被视为失败的解决方案之间的区别。本书涵盖了许多可以应用于构建解决方案的模式，以处理在商业竞争中所需的不可避免的变化，以及实现现代应用程序所期望的健壮性和可靠性。

# 这本书是为谁写的

目标受众是在协作环境中工作的现代应用程序开发人员。故意地，这代表了许多不同的背景和行业，因为这些模式可以应用于各种解决方案。由于本书深入代码来解释所涵盖的模式，读者应该具有软件开发背景——本书不应被视为一本*如何编程*的书，而更像是一本*如何更好地编程*的书。因此，目标受众将从初级开发人员到高级开发人员、软件架构师和设计师都有，对于一些读者，内容将是新的；对于其他人，它将是一个复习。

# 本书涵盖的内容

第一章，《.NET Core 和 C#中面向对象编程概述》，包括了**面向对象编程**（**OOP**）的概述以及它如何应用于 C#。本章作为对 OOP 和 C#的重要构造和特性的复习，包括继承、封装和多态性。

第二章，《现代软件设计模式和原则》，对现代软件开发中使用的不同模式进行了分类和介绍。本章调查了许多模式和目录，如 SOLID、四人帮和企业集成模式，以及软件开发生命周期和其他软件开发实践的讨论。

第三章，《实现设计模式-基础部分 1》，深入探讨了用于在 C#中构建应用程序的设计模式。通过开发一个示例应用程序、测试驱动开发、最小可行产品和四人帮的其他模式来进行说明。

第四章，《实现设计模式-基础部分 2》，继续深入探讨了用于在 C#中构建应用程序的设计模式。还将介绍依赖注入和控制反转的概念，继续探讨包括单例模式和工厂模式在内的设计模式。

第五章，《实现设计模式-.NET Core》，在第三章和第四章的基础上，探讨了.NET Core 提供的模式。将使用.NET Core 框架重新讨论几种模式，包括依赖注入和工厂模式。

第六章，《为 Web 应用程序实现设计模式-第一部分》，继续探索.NET Core，通过继续构建示例应用程序来查看 Web 应用程序开发中支持的特性。本章提供了创建初始 Web 应用程序的指导，讨论了 Web 应用程序的重要特性，并介绍了如何创建 CRUD 网站页面。

第七章，《为 Web 应用程序实现设计模式-第二部分》，继续探讨使用.NET Core 进行 Web 应用程序开发，包括不同的架构模式和解决方案安全模式。还涵盖了身份验证和授权。还添加了单元测试，包括使用 Moq 模拟框架。

第八章，《.NET Core 中的并发编程》，深入讨论了 C#和.NET Core 应用程序开发中的并发性。探讨了 Async/await 模式，以及关于多线程和并发性的部分。还涵盖了并行 LINQ，包括延迟执行和线程优先级。

第九章，《函数式编程实践》，探讨了.NET Core 中的函数式编程。这包括说明支持函数式编程的 C#语言特性，并将其应用于示例应用程序，包括应用策略模式。

第十章，《响应式编程模式和技术》，继续探讨.NET Core Web 应用程序开发，探讨了用于构建响应式和可扩展网站的响应式编程模式和技术。在本章中，探讨了响应式编程的原则，包括响应式和 IObservable 模式。还讨论了不同的框架，包括流行的.NET Rx 扩展，以及**Model-view-viewmodel**（MVVM）模式的示例。

第十一章，《高级数据库设计和应用技术》，探讨了数据库设计中使用的模式，包括对数据库的讨论。展示了应用命令查询责任分离模式的实际示例，包括使用分类账式数据库设计。

第十二章，《云编程》，探讨了应用程序开发在云解决方案中的应用，包括可扩展性、可用性、安全性、应用程序设计和 DevOps 这五个关键问题。解释了云解决方案中使用的重要模式，包括不同类型的扩展和事件驱动架构、联合安全、缓存和遥测中使用的模式。

附录 A，《杂项最佳实践》，总结了模式的讨论，涵盖了其他模式和最佳实践。这包括用例建模、最佳实践以及空间架构和容器化应用程序等其他模式。

# 为了充分利用本书

本书假定读者对面向对象编程和 C#有一定的了解。尽管本书涵盖了高级主题，但它并不是一本全面的开发指南。相反，本书的目标是通过提供大量的模式、实践和原则来提高开发人员和设计师的技能水平。使用工具箱的类比，本书通过从低级代码设计到更高级的架构，以及当今常用的重要模式和原则，为现代应用程序开发人员提供了大量工具。

本书介绍了以下主要观点，这些观点是对读者知识的补充：

+   通过使用 C#7.x 和.NET Core 2.2 的编码示例，了解更多关于 SOLID 原则和最佳实践。

+   深入理解经典设计模式（四人帮模式）。

+   使用 C#语言的函数式编程原则及其工作示例。

+   架构模式（MVC、MVVM）的真实世界示例。

+   了解原生云、微服务等。

# 下载示例代码文件

您可以从您在[www.packt.com](http://www.packt.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packt.com/support](http://www.packt.com/support)并注册，以便文件直接发送到您的邮箱。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packt.com](http://www.packt.com)。

1.  选择“支持”选项卡。

1.  单击“下载代码和勘误表”。

1.  在搜索框中输入书名，然后按照屏幕上的说明操作。

下载文件后，请确保使用最新版本的解压缩软件解压缩文件夹：

+   WinRAR/7-Zip for Windows

+   Zipeg/iZip/UnRarX for Mac

+   7-Zip/PeaZip for Linux

本书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Hands-On-Design-Patterns-with-C-and-.NET-Core`](https://github.com/PacktPublishing/Hands-On-Design-Patterns-with-C-and-.NET-Core)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自丰富书籍和视频目录的其他代码包，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上找到。去看看吧！

# 实际运行的代码

单击以下链接查看代码实际运行情况：[`bit.ly/2KUuNgQ`](http://bit.ly/2KUuNgQ)。

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`static.packt-cdn.com/downloads/9781789133646_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789133646_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。例如：“三个`CounterA()`、`CounterB()`和`CounterC()`方法代表一个单独的票务收集柜台。”

代码块设置如下：

```cs
3-counters are serving...
Next person from row
Person A is collecting ticket from Counter A
Person B is collecting ticket from Counter B
Person C is collecting ticket from Counter C
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```cs
public bool UpdateQuantity(string name, int quantity)
{
    lock (_lock)
    {
        _books[name].Quantity += quantity;
    }

    return true;
}
```

任何命令行输入或输出都以以下形式编写：

```cs
dotnet new sln
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。例如：“从创建新产品，您可以添加新产品，而编辑将为您提供更新现有产品的功能。”

警告或重要说明会显示为这样。

提示和技巧会显示为这样。
