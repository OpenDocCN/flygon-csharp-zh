# 前言

有些编程书籍长达数千页，旨在成为 C#语言、.NET 库、网站、服务和桌面及移动应用等应用模型的全面参考。

本书与众不同，它简洁明了，旨在成为一本轻松愉快的读物，充满每个主题的实用动手演练。虽然整体叙述的广度牺牲了一些深度，但你会发现许多标志指引你进一步探索，如果你愿意的话。

本书既是一本学习现代 C#实践的逐步指南，使用跨平台的.NET，也是对主要实用应用程序类型的简要介绍，这些应用程序可以用它们构建。本书最适合 C#和.NET 的初学者，或者那些在过去使用过 C#但感觉被过去几年变化所落后的程序员。

如果你已有 C#旧版本的经验，那么在*第二章*的*第一节*，*说 C#*中，你可以查看新语言特性的表格并直接跳转到它们。

如果你已有.NET 库旧版本的经验，那么在*第七章*的*第一节*，*打包和分发.NET 类型*中，你可以查看新库特性的表格并直接跳转到它们。

我将指出 C#和.NET 的酷炫角落和陷阱，让你能给同事留下深刻印象并快速提高生产力。与其放慢速度并让一些读者感到无聊，通过解释每一个小细节，我会假设你足够聪明，能够通过谷歌搜索解释与主题相关但不必包含在印刷书籍有限空间内的初学者到中级指南中。

# 代码解决方案的获取位置

你可以在以下链接的 GitHub 仓库中下载逐步指导任务和练习的解决方案：[`github.com/markjprice/cs10dotnet6`](https://github.com/markjprice/cs10dotnet6)。

如果你不知道如何操作，我会在*第一章*，*你好，C#！欢迎，.NET！*的末尾提供操作指南。

# 本书内容涵盖

*第一章*，*你好，C#！欢迎，.NET！*，是关于设置你的开发环境，并使用 Visual Studio 或 Visual Studio Code 创建最简单的 C#和.NET 应用程序。对于简化的控制台应用，你将看到 C# 9 引入的顶级程序特性的使用。为了学习如何编写简单的语言结构和库特性，你将看到.NET 交互式笔记本的使用。你还将了解一些寻求帮助的好地方，以及通过 GitHub 仓库与我联系以获取解决问题或提供反馈以改进本书和未来版本的方法。

*第二章*，*说 C#*，介绍了 C#的版本，并提供了表格显示哪些版本引入了新特性。我解释了日常编写应用程序源代码所需的语法和词汇。特别是，你将学习如何声明和操作不同类型的变量。

*第三章*，*控制流程、类型转换和异常处理*，涵盖了使用运算符对变量执行简单操作，包括比较，编写决策代码，C# 7 到 C# 10 中的模式匹配，重复语句块，以及类型之间的转换。它还涵盖了编写防御性代码以处理不可避免发生的异常。

*第四章*，*编写、调试和测试函数*，是关于遵循**不要重复自己**（**DRY**）原则，通过使用命令式和函数式实现风格编写可重用函数。你还将学习如何使用调试工具来追踪和消除错误，监控代码执行以诊断问题，并严格测试代码以消除错误，确保在部署到生产环境之前的稳定性和可靠性。

*第五章*，*使用面向对象编程构建自己的类型*，讨论了类型可以拥有的所有不同类别的成员，包括用于存储数据的字段和用于执行操作的方法。你将运用**面向对象编程**（**OOP**）的概念，如聚合和封装。你将了解诸如元组语法支持、`out`变量、默认字面量和推断元组名称等语言特性，以及如何使用 C# 9 中引入的`record`关键字、仅初始化属性以及`with`表达式定义和操作不可变类型。

*第六章*，*实现接口和继承类*，解释了使用 OOP 从现有类型派生新类型。你将学习如何定义运算符和局部函数、委托和事件，如何实现关于基类和派生类的接口，如何重写类型的成员，如何使用多态性，如何创建扩展方法，如何在继承层次结构中进行类之间的转换，以及 C# 8 中引入可空引用类型的大变化。

*第七章*，*打包和分发.NET 类型*，介绍了.NET 的版本，并提供了表格显示哪些版本引入了新的库特性，然后介绍了符合.NET 标准的.NET 类型以及它们与 C#的关系。你将学习如何在支持的操作系统（Windows、macOS 和 Linux 变体）上编写和编译代码。你将学习如何打包、部署和分发你自己的应用程序和库。

*第八章*，*使用常见的.NET 类型*，讨论了使你的代码能够执行常见实际任务的类型，例如操作数字和文本、日期和时间、在集合中存储项目、处理网络和操作图像，以及实现国际化。

*第九章*，*使用文件、流和序列化*，涵盖了与文件系统交互、读写文件和流、文本编码以及 JSON 和 XML 等序列化格式，包括`System.Text.Json`类增强的功能和性能。

*第十章*，*使用 Entity Framework Core 处理数据*，讲解了如何使用名为**实体框架核心**（**EF Core**）的**对象关系映射**（**ORM**）技术读写关系数据库，如 Microsoft SQL Server 和 SQLite。你将学习如何定义映射到数据库中现有表的实体模型，以及如何定义可以在运行时创建表和数据库的 Code First 模型。

*第十一章*，*使用 LINQ 查询和操作数据*，教授你关于**语言集成查询**（**LINQ**）——这些语言扩展增加了处理项目序列、过滤、排序并将它们投射到不同输出的能力。你将了解**并行 LINQ**（**PLINQ**）和 LINQ to XML 的特殊功能。

*第十二章*，*使用多任务提高性能和可扩展性*，讨论了允许同时发生多个动作以提高性能、可扩展性和用户生产率的方法。你将学习`async Main`特性以及如何使用`System.Diagnostics`命名空间中的类型来监控你的代码，以衡量性能和效率。

*第十三章*，*介绍 C#和.NET 的实际应用*，向你介绍了可以使用 C#和.NET 构建的跨平台应用程序类型。你还将构建一个 EF Core 模型来表示 Northwind 数据库，该数据库将在本书的其余章节中使用。

*第十四章*，*使用 ASP.NET Core Razor Pages 构建网站*，讲述了如何利用现代 HTTP 架构在服务器端使用 ASP.NET Core 学习网站构建的基础知识。你将学习如何实现 ASP.NET Core 的 Razor Pages 特性，该特性简化了为小型网站创建动态网页的过程，以及构建 HTTP 请求和响应管道的知识。

*第十五章*，*使用模型-视图-控制器模式构建网站*，讲述了如何使用 ASP.NET Core MVC 以易于单元测试和管理团队编程的方式构建大型复杂网站。你将学习启动配置、认证、路由、模型、视图和控制器。

*第十六章*，*构建和消费 Web 服务*，解释了使用 ASP.NET Core Web API 构建后端 REST 架构的 Web 服务以及如何正确使用工厂实例化的 HTTP 客户端消费它们。

*第十七章*，*使用 Blazor 构建用户界面*，介绍如何使用 Blazor 构建可在服务器端或客户端 Web 浏览器内执行的 Web 用户界面组件。您将了解 Blazor Server 和 Blazor WebAssembly 之间的差异，以及如何构建易于在这两种托管模型之间切换的组件。

三篇在线附加章节为本版增色不少。您可以在[`static.packt-cdn.com/downloads/9781801077361_Bonus_Content.pdf`](https://static.packt-cdn.com/downloads/9781801077361_Bonus_Content.pdf)阅读以下章节及附录：

*第十八章*，*构建和消费专业化服务*，向您介绍使用 gRPC 构建服务，使用 SignalR 实现服务器与客户端之间的实时通信，通过 OData 公开 EF Core 模型，以及在云中托管响应触发器的函数使用 Azure Functions。

*第十九章*，*使用.NET MAUI 构建移动和桌面应用*，向您介绍如何为 Android、iOS、macOS 和 Windows 构建跨平台的移动和桌面应用。您将学习 XAML 的基础知识，这是一种用于定义图形应用用户界面的语言。

*第二十章*，*保护您的数据和应用*，涉及使用加密保护数据不被恶意用户查看，使用哈希和签名防止数据被篡改或损坏。您还将学习认证和授权以保护应用免受未授权用户的侵害。

*附录*，*测试题答案*，提供了每章末尾测试题的答案。

# 本书所需条件

您可以在包括 Windows、macOS 和多种 Linux 在内的多个平台上使用 Visual Studio Code 开发和部署 C#和.NET 应用。

除了一个章节外，您只需一个支持 Visual Studio Code 的操作系统和互联网连接即可完成所有章节。

如果您更喜欢使用 Windows 或 macOS 上的 Visual Studio，或是第三方工具如 JetBrains Rider，那么您可以这么做。

您需要 macOS 来构建*第十九章*，*使用.NET MAUI 构建移动和桌面应用*中的 iOS 应用，因为编译 iOS 应用必须要有 macOS 和 Xcode。

## 下载本书的彩色图像

我们还为您提供了一个包含本书中使用的屏幕截图和图表的彩色图像的 PDF 文件。彩色图像将帮助您更好地理解输出的变化。

您可以从[`static.packt-cdn.com/downloads/9781801077361_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781801077361_ColorImages.pdf)下载此文件。

## 约定

在本书中，您会发现多种文本样式用于区分不同类型的信息。以下是这些样式的示例及其含义的解释。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。例如；“`Controllers`、`Models`和`Views`文件夹包含 ASP.NET Core 类以及服务器上执行的`.cshtml`文件。”

代码块的设置如下：

```cs
// storing items at index positions 
names[0] = "Kate";
names[1] = "Jack"; 
names[2] = "Rebecca"; 
names[3] = "Tom"; 
```

当我们希望引起您对代码块特定部分的注意时，相关行或项会突出显示：

```cs
// storing items at index positions 
names[0] = "Kate";
**names[****1****] =** **"Jack"****;** 
names[2] = "Rebecca"; 
names[3] = "Tom"; 
```

命令行输入或输出的书写格式如下：

```cs
dotnet new console 
```

**粗体**：表示一个新**术语**、一个重要**单词**或您在屏幕上看到的单词，例如在菜单或对话框中。例如：“点击**下一步**按钮将您带到下一个屏幕。”

重要提示和指向外部进一步阅读资源的链接以这种框的形式出现。

**良好实践**：专家编程建议以这种方式出现。
