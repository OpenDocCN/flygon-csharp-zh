- en: '17'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Building User Interfaces Using Blazor
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter is about using Blazor to build user interfaces. I will describe
    the different flavors of Blazor and their pros and cons.
  prefs: []
  type: TYPE_NORMAL
- en: You will learn how to build Blazor components that can execute their code on
    the web server or in the web browser. When hosted with Blazor Server, it uses
    SignalR to communicate needed updates to the user interface in the browser. When
    hosted with Blazor WebAssembly, the components execute their code in the client
    and must make HTTP calls to interact with the server.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Blazor
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Comparing Blazor project templates
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building components using Blazor Server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Abstracting a service for a Blazor component
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building components using Blazor WebAssembly
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Improving Blazor WebAssembly apps
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding Blazor
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Blazor lets you build shared components and interactive web user interfaces
    using C# instead of JavaScript. In April 2019, Microsoft announced that Blazor
    "is no longer experimental and we are committing to ship it as a supported web
    UI framework, including support for running client side in the browser on WebAssembly."
    Blazor is supported on all modern browsers.
  prefs: []
  type: TYPE_NORMAL
- en: JavaScript and friends
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Traditionally, any code that needs to execute in a web browser is written using
    the JavaScript programming language or a higher-level technology that **transpiles**
    (transforms or compiles) into JavaScript. This is because all browsers have supported
    JavaScript for about two decades, so it has become the lowest common denominator
    for implementing business logic on the client side.
  prefs: []
  type: TYPE_NORMAL
- en: JavaScript does have some issues, however. Although it has superficial similarities
    to C-style languages like C# and Java, it is actually very different once you
    dig beneath the surface. It is a dynamically typed pseudo-functional language
    that uses prototypes instead of class inheritance for object reuse. It might look
    human, but you will get a surprise when it's revealed to actually be a Skrull.
  prefs: []
  type: TYPE_NORMAL
- en: Wouldn't it be great if we could use the same language and libraries in a web
    browser as we do on the server side?
  prefs: []
  type: TYPE_NORMAL
- en: Silverlight – C# and .NET using a plugin
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Microsoft made a previous attempt at achieving this goal with a technology named
    Silverlight. When Silverlight 2.0 was released in 2008, a C# and .NET developer
    could use their skills to build libraries and visual components that were executed
    in the web browser by the Silverlight plugin.
  prefs: []
  type: TYPE_NORMAL
- en: By 2011 and Silverlight 5.0, Apple's success with the iPhone and Steve Jobs'
    hatred of browser plugins like Flash eventually led to Microsoft abandoning Silverlight
    since, like Flash, Silverlight is banned from iPhones and iPads.
  prefs: []
  type: TYPE_NORMAL
- en: WebAssembly – a target for Blazor
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'A recent development in browsers has given Microsoft the opportunity to make
    another attempt. In 2017, the **WebAssembly Consensus** was completed, and all
    major browsers now support it: Chromium (Chrome, Edge, Opera, Brave), Firefox,
    and WebKit (Safari). Blazor is not supported by Microsoft''s Internet Explorer
    because it is a legacy web browser.'
  prefs: []
  type: TYPE_NORMAL
- en: '**WebAssembly** (**Wasm**) is a binary instruction format for a virtual machine
    that provides a way to run code written in multiple languages on the web at near-native
    speed. Wasm is designed as a portable target for the compilation of high-level
    languages like C#.'
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Blazor hosting models
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Blazor is a single programming or app model with multiple hosting models:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Blazor Server** runs on the server side, so the C# code that you write has
    full access to all resources that your business logic might need without needing
    to authenticate. It then uses SignalR to communicate user interface updates to
    the client side.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The server must keep a live SignalR connection to each client and track the
    current state of every client, so Blazor Server does not scale well if you need
    to support lots of clients. It first shipped as part of ASP.NET Core 3.0 in September
    2019 and is included with .NET 5.0 and later.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Blazor WebAssembly** runs on the client side, so the C# code that you write
    only has access to resources in the browser and it must make HTTP calls (that
    might require authentication) before it can access resources on the server. It
    first shipped as an extension to ASP.NET Core 3.1 in May 2020 and was versioned
    3.2 because it is a Current release and therefore not covered by ASP.NET Core
    3.1''s Long Term Support. The Blazor WebAssembly 3.2 version used the Mono runtime
    and Mono libraries; .NET 5 and later versions use the Mono runtime and the .NET
    5 libraries. "*Blazor WebAssembly runs on a .NET IL interpreter without any JIT
    so it''s not going to win any speed competitions. We have made some significant
    speed improvements though in .NET 5, and we expect to improve things further for
    .NET 6.*"—Daniel Roth'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**.NET MAUI Blazor App**, aka **Blazor Hybrid**, runs in the .NET process,
    renders its web UI to a web view control using a local interop channel, and is
    hosted in a .NET MAUI app. It is conceptually like Electron apps that use Node.js.
    We will see this hosting model in online chapter, *Chapter 19*, *Building Mobile
    and Desktop Apps Using .NET MAUI*.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This multi-host model means that, with careful planning, a developer can write
    Blazor components once, and then run them on the web server side, web client side,
    or within a desktop app.
  prefs: []
  type: TYPE_NORMAL
- en: Although Blazor Server is supported on Internet Explorer 11, Blazor WebAssembly
    is not.
  prefs: []
  type: TYPE_NORMAL
- en: Blazor WebAssembly has optional support for **Progressive Web Apps** (**PWAs**),
    meaning a website visitor can use a browser menu to add the app to their desktop
    and run the app offline.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Blazor components
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It is important to understand that Blazor is used to create **user interface
    components**. Components define how to render the user interface, react to user
    events, and can be composed and nested, and compiled into a NuGet Razor class
    library for packaging and distribution.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, you might create a component named `Rating.razor`, as shown in
    the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Instead of a single file with both markup and an `@code` block, the code can
    be stored in a separate code-behind file named `Rating.razor.cs`. The class in
    this file must be `partial` and have the same name as the component.
  prefs: []
  type: TYPE_NORMAL
- en: 'You could then use the component on a web page, as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: There are many built-in Blazor components, including ones to set elements like
    `<title>` in the `<head>` section of a web page, and plenty of third parties who
    will sell you components for common purposes.
  prefs: []
  type: TYPE_NORMAL
- en: In the future, Blazor might not be limited to only creating user interface components
    using web technologies. Microsoft has an experimental technology known as **Blazor
    Mobile Bindings** that allows developers to use Blazor to build mobile user interface
    components. Instead of using HTML and CSS to build a web user interface, it uses
    XAML and .NET MAUI to build a cross-platform graphical user interface.
  prefs: []
  type: TYPE_NORMAL
- en: What is the difference between Blazor and Razor?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You might wonder why Blazor components use `.razor` as their file extension.
    Razor is a template markup syntax that allows the mixing of HTML and C#. Older
    technologies that support Razor syntax use the `.cshtml` file extension to indicate
    the mix of C# and HTML.
  prefs: []
  type: TYPE_NORMAL
- en: 'Razor syntax is used for:'
  prefs: []
  type: TYPE_NORMAL
- en: ASP.NET Core MVC **views** and **partial views** that use the `.cshtml` file
    extension. The business logic is separated into a controller class that treats
    the view as a template to push the view model to, which then outputs it to a web
    page.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Razor Pages** that use the `.cshtml` file extension. The business logic can
    be embedded or separated into a file that uses the `.cshtml.cs` file extension.
    The output is a web page.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Blazor components** that use the `.razor` file extension. The output is not
    a web page, although layouts can be used to wrap a component so it outputs as
    a web page, and the `@page` directive can be used to assign a route that defines
    the URL path to retrieve the component as a page.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Comparing Blazor project templates
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One way to understand the choice between the Blazor Server and Blazor WebAssembly
    hosting models is to review the differences in their default project templates.
  prefs: []
  type: TYPE_NORMAL
- en: Reviewing the Blazor Server project template
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let us look at the default template for a Blazor Server project. Mostly you
    will see that it is the same as an ASP.NET Core Razor Pages template, with a few
    key additions:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Use your preferred code editor to add a new project, as defined in the following
    list:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project template: **Blazor Server App** / `blazorserver`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Workspace/solution file and folder: `PracticalApps`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project file and folder: `Northwind.BlazorServer`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Other Visual Studio options: **Authentication Type**: **None**; **Configure
    for HTTPS**: selected; **Enable Docker**: cleared'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: In Visual Studio Code, select `Northwind.BlazorServer` as the active OmniSharp
    project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Build the `Northwind.BlazorServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the `Northwind.BlazorServer` project/folder, open `Northwind.BlazorServer.csproj`
    and note that it is identical to an ASP.NET Core project that uses the Web SDK
    and targets .NET 6.0.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Open `Program.cs`, and note it is almost identical to an ASP.NET Core project.
    Differences include the section that configures services, with its call to the
    `AddServerSideBlazor` method, as shown highlighted in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Also note the section for configuring the HTTP pipeline, which adds the calls
    to the `MapBlazorHub` and `MapFallbackToPage` methods that configure the ASP.NET
    Core app to accept incoming SignalR connections for Blazor components, while other
    requests fall back to a Razor Page named `_Host.cshtml`, as shown highlighted
    in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, open `_Host.cshtml` and note that it sets a shared layout
    named `_Layout` and renders a Blazor component of type `App` that is prerendered
    on the server, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, open the shared layout file named `_Layout.cshtml`,
    as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'While reviewing the preceding markup, note the following:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`<div id="blazor-error-ui">` for showing Blazor errors that will appear as
    a yellow bar at the bottom of the web page when an error occurs'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: The script block for `blazor.server.js` manages the SignalR connection back
    to the server
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In the `Northwind.BlazorServer` folder, open `App.razor` and note that it defines
    a `Router` for all components found in the current assembly, as shown in the following
    code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'While reviewing the preceding markup, note the following:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If a matching route is found, then `RouteView` is executed that sets the default
    layout for the component to `MainLayout` and passes any route data parameters
    to the component.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: If a matching route is not found, then `LayoutView` is executed that renders
    the internal markup (in this case, a simple paragraph element with a message telling
    the visitor there is nothing at this address) inside `MainLayout`.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In the `Shared` folder, open `MainLayout.razor` and note that it defines `<div>`
    for a sidebar containing a navigation menu that is implemented by the `NavMenu.razor`
    component file in this project, and an HTML5 element such as `<main>` and `<article>`
    for the content, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: In the `Shared` folder, open `MainLayout.razor.css` and note that it contains
    isolated CSS styles for the component.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the `Shared` folder, open `NavMenu.razor` and note that it has three menu
    items for **Home**, **Counter**, and **Fetch data**. These are created by using
    a Microsoft-provided Blazor component named `NavLink`, as shown in the following
    markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, open `FetchData.razor` and note that it defines a component
    that fetches weather forecasts from an injected dependency weather service and
    then renders them in a table, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Data` folder, open `WeatherForecastService.cs` and note that it is
    *not* a Web API controller class; it is just an ordinary class that returns random
    weather data, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Understanding CSS and JavaScript isolation
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Blazor components often need to provide their own CSS to apply styling or JavaScript
    for activities that cannot be performed purely in C#, like access to browser APIs.
    To ensure this does not conflict with site-level CSS and JavaScript, Blazor supports
    CSS and JavaScript isolation. If you have a component named `Index.razor`, simply
    create a CSS file named `Index.razor.css`. The styles defined within this file
    will override any other styles in the project.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding Blazor routing to page components
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The `Router` component that we saw in the `App.razor` file enables routing to
    components. The markup for creating an instance of a component looks like an HTML
    tag where the name of the tag is the component type. Components can be embedded
    on a web page using an element, for example, `<Rating Stars="5" />`, or can be
    routed to like a Razor Page or MVC controller.
  prefs: []
  type: TYPE_NORMAL
- en: How to define a routable page component
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To create a routable page component, add the `@page` directive to the top of
    a component''s `.razor` file, as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'The preceding code is the equivalent of an MVC controller decorated with the
    `[Route]` attribute, as shown in the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: The `Router` component scans the assembly specifically in its `AppAssembly`
    parameter for components decorated with the `[Route]` attribute and registers
    their URL paths.
  prefs: []
  type: TYPE_NORMAL
- en: Any single-page component can have multiple `@page` directives to register multiple
    routes.
  prefs: []
  type: TYPE_NORMAL
- en: At runtime, the page component is merged with any specific layout that you have
    specified, just like an MVC view or Razor Page would be. By default, the Blazor
    Server project template defines `MainLayout.razor` as the layout for page components.
  prefs: []
  type: TYPE_NORMAL
- en: '**Good Practice**: By convention, put routable page components in the `Pages`
    folder.'
  prefs: []
  type: TYPE_NORMAL
- en: How to navigate Blazor routes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Microsoft provides a dependency service named `NavigationManager` that understands
    Blazor routing and the `NavLink` component.
  prefs: []
  type: TYPE_NORMAL
- en: The `NavigateTo` method is used to go to the specified URL.
  prefs: []
  type: TYPE_NORMAL
- en: How to pass route parameters
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Blazor routes can include case-insensitive named parameters, and your code
    can most easily access the passed values by binding the parameter to a property
    in the code block using the `[Parameter]` attribute, as shown in the following
    markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'The recommended way to handle a parameter that should have a default value
    when it is missing is to suffix the parameter with `?` and use the null coalescing
    operator in the `OnParametersSet` method, as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: Understanding base component classes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The `OnParametersSet` method is defined by the base class that components inherit
    from by default named `ComponentBase`, as shown in the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: '`ComponentBase` has some useful methods that you can call and override, as
    shown in the following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Method(s) | Description |'
  prefs: []
  type: TYPE_TB
- en: '| `InvokeAsync` | Call this method to execute a function on the associated
    renderer''s synchronization context. |'
  prefs: []
  type: TYPE_TB
- en: '| `OnAfterRender`, `OnAfterRenderAsync` | Override these methods to invoke
    code after each time the component has been rendered. |'
  prefs: []
  type: TYPE_TB
- en: '| `OnInitialized`, `OnInitializedAsync` | Override these methods to invoke
    code after the component has received its initial parameters from its parent in
    the render tree. |'
  prefs: []
  type: TYPE_TB
- en: '| `OnParametersSet`, `OnParametersSetAsync` | Override these methods to invoke
    code after the component has received parameters and the values have been assigned
    to properties. |'
  prefs: []
  type: TYPE_TB
- en: '| `ShouldRender` | Override this method to indicate if the component should
    render. |'
  prefs: []
  type: TYPE_TB
- en: '| `StateHasChanged` | Call this method to cause the component to re-render.
    |'
  prefs: []
  type: TYPE_TB
- en: Blazor components can have shared layouts in a similar way to MVC views and
    Razor Pages.
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a `.razor` component file, but make it explicitly inherit from `LayoutComponentBase`,
    as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: The base class has a property named `Body` that you can render in the markup
    at the correct place within the layout.
  prefs: []
  type: TYPE_NORMAL
- en: 'Set a default layout for components in the `App.razor` file and its `Router`
    component. To explicitly set a layout for a component, use the `@layout` directive,
    as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: How to use the navigation link component with routes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In HTML, you use the `<a>` element to define navigation links, as shown in
    the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'In Blazor, use the `<NavLink>` component, as shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: The `NavLink` component is better than an anchor element because it automatically
    sets its class to `active` if its `href` is a match on the current location URL.
    If your CSS uses a different class name, then you can set the class name in the
    `NavLink.ActiveClass` property.
  prefs: []
  type: TYPE_NORMAL
- en: 'By default, in the matching algorithm, the `href` is a path *prefix*, so if
    `NavLink` has an `href` of `/customers`, as shown in the preceding code example,
    then it would match all the following paths and set them all to have the `active`
    class style:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'To ensure that the matching algorithm only performs matches on *all* of the
    paths, set the `Match` parameter to `NavLinkMatch.All`, as shown in the following
    code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: If you set other attributes such as `target`, they are passed through to the
    underlying `<a>` element that is generated.
  prefs: []
  type: TYPE_NORMAL
- en: Running the Blazor Server project template
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now that we have reviewed the project template and the important parts that
    are specific to Blazor Server, we can start the website and review its behavior:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Properties` folder, open `launchSettings.json`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify the `applicationUrl` to use port `5000` for `HTTP` and port `5001` for
    `HTTPS`, as shown highlighted in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the website.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Fetch data**, as shown in *Figure 17.1*:![](img/B17442_19_01.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.1: Fetching weather data into a Blazor Server app'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the browser address bar, change the route to `/apples` and note the missing
    message, as shown in *Figure 17.2*:![](img/B17442_19_02.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.2: The missing component message'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Reviewing the Blazor WebAssembly project template
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we will create a Blazor WebAssembly project. I will not show code in the
    book if the code is the same as in a Blazor Server project:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Use your preferred code editor to add a new project to the `PracticalApps`
    solution or workspace, as defined in the following list:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project template: **Blazor WebAssembly App** / `blazorwasm`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Switches: `--pwa --hosted`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Workspace/solution file and folder: `PracticalApps`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project file and folder: `Northwind.BlazorWasm`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Authentication Type**: **None**'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Configure for HTTPS**: checked'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**ASP.NET Core hosted**: checked'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Progressive Web Application**: checked'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'While reviewing the generated folders and files, note that three projects are
    generated, as described in the following list:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`Northwind.BlazorWasm.Client` is the Blazor WebAssembly project in the `Northwind.BlazorWasm\Client`
    folder.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Northwind.BlazorWasm.Server` is an ASP.NET Core project website in the `Northwind.BlazorWasm\Server`
    folder for hosting the weather service that has the same implementation for returning
    random weather forecasts as before, but is implemented as a proper Web API controller
    class. The project file has project references to `Shared` and `Client`, and a
    package reference to support Blazor WebAssembly on the server side.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Northwind.BlazorWasm.Shared` is a class library in the `Northwind.BlazorWasm\Shared`
    folder that contains models for the weather service.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The folder structure is simplified, as shown in *Figure 17.3*:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![](img/B17442_19_03.png)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'Figure 17.3: The folder structure for the Blazor WebAssembly project template'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'There are two ways to deploy a Blazor WebAssembly app. You could deploy just
    the `Client` project by placing its published files in any static hosting web
    server. It could be configured to call the weather service that you created in
    *Chapter 16*, *Building and Consuming Web Services*, or you can deploy the `Server`
    project, which references the `Client` app and hosts both the weather service
    and the Blazor WebAssembly app. The app is placed in the server website `wwwroot`
    folder along with any other static assets. You can read more about these choices
    at the following link: [https://docs.microsoft.com/en-us/aspnet/core/blazor/host-and-deploy/webassembly](https://docs.microsoft.com/en-us/aspnet/core/blazor/host-and-deploy/webassembly)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'In the `Client` folder, open `Northwind.BlazorWasm.Client.csproj` and note
    that it uses the Blazor WebAssembly SDK and references two WebAssembly packages
    and the `Shared` project, as well as the service worker required for PWA support,
    as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Client` folder, open `Program.cs` and note that the host builder is
    for `WebAssembly` instead of server-side ASP.NET Core, and that it registers a
    dependency service for making HTTP requests, which is an extremely common requirement
    for Blazor WebAssembly apps, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `wwwroot` folder, open `index.html` and note the `manifest.json` and
    `service-worker.js` files supporting offline work, and the `blazor.webassembly.js`
    script that downloads all the NuGet packages for Blazor WebAssembly, as shown
    in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Note that the following `.razor` files are identical to those in a Blazor Server
    project:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`App.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Shared\MainLayout.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Shared\NavMenu.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Shared\SurveyPrompt.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Pages\Counter.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Pages\Index.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In the `Pages` folder, open `FetchData.razor` and note that the markup is like
    Blazor Server except for the injected dependency service for making HTTP requests,
    as shown highlighted in the following partial markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the `Northwind.BlazorWasm.Server` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note that the app has the same functionality as before. The Blazor component
    code is executing inside the browser instead of on the server. The weather service
    is running on the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Building components using Blazor Server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will build a component to list, create, and edit customers
    in the Northwind database. We will build it first for Blazor Server naively, and
    then refactor it to work with both Blazor Server and Blazor WebAssembly.
  prefs: []
  type: TYPE_NORMAL
- en: Defining and testing a simple component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We will add the new component to the existing Blazor Server project:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Northwind.BlazorServer` project (*not* the `Northwind.BlazorWasm.Server`
    project), in the `Pages` folder, add a new file named `Customers.razor`. In Visual
    Studio, the project item is named **Razor Component**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Good Practice**: Component filenames must start with an uppercase letter,
    or you will have compile errors!'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Add statements to output a heading for the `Customers` component and define
    a code block that defines a property to store the name of a country, as shown
    in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, in the `Index.razor` component, add statements to the
    bottom of the file to instantiate the `Customers` component twice, once passing
    `Germany` as the country parameter, and once without setting the country, as shown
    in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the `Northwind.BlazorServer` website project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/` and note the `Customers` components, as
    shown in *Figure 17.4*:![](img/B17442_19_04.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.4: The Customers component with the Country parameter set to Germany
    and not set'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Making the component a routable page component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'It is simple to turn this component into a routable page component with a route
    parameter for the country:'
  prefs: []
  type: TYPE_NORMAL
- en: 'In the `Pages` folder, in the `Customers.razor` component, add a statement
    at the top of the file to register `/customers` as its route with an optional
    country route parameter, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Shared` folder, open `NavMenu.razor` and add two list item elements
    for our routable page component to show customers worldwide and in Germany that
    both use an icon of people, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'We used an icon of people for the customers menu item. You can see the other
    available icons at the following link: [https://iconify.design/icon-sets/oi/](https://iconify.design/icon-sets/oi/)'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Start the website project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Customers in Germany**, and note that the
    country name is correctly passed to the page component and that the component
    uses the same shared layout as the other page components, like `Index.razor`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Getting entities into a component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now that you have seen the minimum implementation of a component, we can add
    some useful functionality to it. In this case, we will use the Northwind database
    context to fetch customers from the database:'
  prefs: []
  type: TYPE_NORMAL
- en: 'In `Northwind.BlazorServer.csproj`, add a reference to the Northwind database
    context project for either SQL Server or SQLite, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Build the `Northwind.BlazorServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In `Program.cs`, import the namespace for working with the Northwind database
    context, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the section that configures services, add a statement to register the Northwind
    database context in the dependency services collection, as shown in the following
    code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Open `_Imports.razor` and import namespaces for working with the Northwind
    entities so that Blazor components that we build do not need to import the namespaces
    individually, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The `_Imports.razor` file only applies to `.razor` files. If you use code-behind
    `.cs` files to implement component code, then they must have namespaces imported
    separately or use global usings to implicitly import the namespace.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'In the `Pages` folder, in `Customers.razor`, add statements to inject the Northwind
    database context and then use it to output a table of all customers, as shown
    in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the `Northwind.BlazorServer` project website.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Customers Worldwide**, and note that the
    table of customers loads from the database and renders in the web page, as shown
    in *Figure 17.5*:![](img/B17442_19_05.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.5: The list of customers worldwide'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Customers in Germany**, and note that the
    table of customers is filtered to only show German customers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the browser address bar, change `Germany` to `UK`, and note that the table
    of customers is filtered to only show UK customers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Home**, and note that the customers component
    also works correctly when used as an embedded component on a page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click any of the edit or delete buttons and note that they return a message
    saying `Sorry, there's nothing at this address`. because we have not yet implemented
    that functionality.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the browser.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Abstracting a service for a Blazor component
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Currently, the Blazor component directly calls the Northwind database context
    to fetch the customers. This works fine in Blazor Server since the component executes
    on the server. But this component would not work when hosted in Blazor WebAssembly.
  prefs: []
  type: TYPE_NORMAL
- en: 'We will now create a local dependency service to enable better reuse of the
    components:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Northwind.BlazorServer` project, in the `Data` folder, add a new file
    named `INorthwindService.cs`. (The Visual Studio project item template is named
    **Interface**.)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify its contents to define a contract for a local service that abstracts
    CRUD operations, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Data` folder, add a new file named `NorthwindService.cs` and modify
    its contents to implement the `INorthwindService` interface by using the Northwind
    database context, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In `Program.cs`, in the section that configures services, add a statement to
    register `NorthwindService` as a transient service that implements the `INorthwindService`
    interface, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, open `Customers.razor` and replace the directive to
    inject the Northwind database context with a directive to inject the registered
    Northwind service, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Modify the `OnParametersSetAsync` method to call the service, as shown highlighted
    in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the `Northwind.BlazorServer` website project and confirm that it retains
    the same functionality as before.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Defining forms using the EditForm component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Microsoft provides ready-made components for building forms. We will use them
    to provide, create, and edit functionality for customers.
  prefs: []
  type: TYPE_NORMAL
- en: Microsoft provides the `EditForm` component and several form elements such as
    `InputText` to make it easier to use forms with Blazor.
  prefs: []
  type: TYPE_NORMAL
- en: '`EditForm` can have a model set to bind it to an object with properties and
    event handlers for custom validation, as well as recognizing standard Microsoft
    validation attributes on the model class, as shown in the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs: []
  type: TYPE_PRE
- en: As an alternative to a `ValidationSummary` component, you can use the `ValidationMessage`
    component to show a message next to an individual form element.
  prefs: []
  type: TYPE_NORMAL
- en: Building and using a customer form component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we can create a shared component to create or edit a customer:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Shared` folder, create a new file named `CustomerDetail.razor`. (The
    Visual Studio project item template is named **Razor Component**.) This component
    will be reused on multiple page components.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify its contents to define a form to edit the properties of a customer,
    as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: In the `Pages` folder, create a new file named `CreateCustomer.razor`. This
    will be a routable page component.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify its contents to use the customer detail component to create a new customer,
    as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, open the file named `Customers.razor` and after the
    `<h3>` element, add a `<div>` element with a button to navigate to the `createcustomer`
    page component, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, create a new file named `EditCustomer.razor` and modify
    its contents to use the customer detail component to edit and save changes to
    an existing customer, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, create a new file named `DeleteCustomer.razor` and modify
    its contents to use the customer detail component to show the customer that is
    about to be deleted, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Testing the customer form component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we can test the customer form component and how to use it to create, edit,
    and delete customers:'
  prefs: []
  type: TYPE_NORMAL
- en: Start the `Northwind.BlazorServer` website project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to **Customers Worldwide** and click the **+ Create New** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter an invalid **Customer Id** like `ABCDEF`, leave the textbox, and note
    the validation message, as shown in *Figure 17.6*:![](img/B17442_19_06.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.6: Creating a new customer and entering an invalid customer ID'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Change the **Customer Id** to `ABCDE`, enter values for the other textboxes,
    and click the **Create Customer** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When the list of customers appears, scroll down to the bottom of the page to
    see the new customer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the **ABCDE** customer row, click the **Edit** icon button, change the address,
    click the **Update** button, and note that the customer record has been updated.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the **ABCDE** customer row, click the **Delete** icon button, note the warning,
    click the **Delete Customer** button, and note that the customer record has been
    deleted.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Building components using Blazor WebAssembly
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now we will reuse the same functionality in the Blazor WebAssembly project so
    that you can clearly see the key differences.
  prefs: []
  type: TYPE_NORMAL
- en: 'Since we abstracted the local dependency service in the `INorthwindService`
    interface, we will be able to reuse all the components and that interface, as
    well as the entity model classes. The only part that will need to be rewritten
    is the implementation of the `NorthwindService` class. Instead of directly calling
    the `NorthwindContext` class, it will call a customer Web API controller on the
    server side, as shown in *Figure 17.7*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/B17442_19_08.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 17.7: Comparing implementations using Blazor Server and Blazor WebAssembly'
  prefs: []
  type: TYPE_NORMAL
- en: Configuring the server for Blazor WebAssembly
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'First, we need a web service that the client app can call to get and manage
    customers. If you completed *Chapter 16*, *Building and Consuming Web Services*,
    then you have a customer service in the `Northwind.WebApi` service project that
    you could use. However, to keep this chapter more self-contained, let''s build
    a customer Web API controller in the `Northwind.BlazorWasm.Server` project:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Warning!** Unlike previous projects, relative path references for shared
    projects like the entity models and the database are two levels up, for example,
    `"..\.."`.'
  prefs: []
  type: TYPE_NORMAL
- en: 'In the `Server` project/folder, open `Northwind.BlazorWasm.Server.csproj` and
    add statements to reference the Northwind database context project for either
    SQL Server or SQLite, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Build the `Northwind.BlazorWasm.Server` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the `Server` project/folder, open `Program.cs` and add a statement to import
    the namespace for working with the Northwind database context, as shown in the
    following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the section that configures services, add a statement to register the Northwind
    database context for either SQL Server or SQLite, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE49]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Server` project, in the `Controllers` folder, create a file named `CustomersController.cs`
    and add statements to define a Web API controller class with similar CRUD methods
    as before, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE50]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Configuring the client for Blazor WebAssembly
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Second, we can reuse the components from the Blazor Server project. Since the
    components will be identical, we can copy them and only need to make changes to
    the local implementation of the abstracted Northwind service:'
  prefs: []
  type: TYPE_NORMAL
- en: 'In the `Client` project, open `Northwind.BlazorWasm.Client.csproj` and add
    statements to reference the Northwind entity models library project (not the database
    context project) for either SQL Server or SQLite, as shown in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE51]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Build the `Northwind.BlazorWasm.Client` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the `Client` project, open `_Imports.razor` and import the `Packt.Shared`
    namespace to make the Northwind entity model types available in all Blazor components,
    as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE52]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Client` project, in the `Shared` folder, open `NavMenu.razor` and add
    a `NavLink` element for customers worldwide and in France, as shown in the following
    markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE53]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Copy the `CustomerDetail.razor` component from the `Northwind.BlazorServer`
    project's `Shared` folder to the `Northwind.BlazorWasm` `Client` project's `Shared`
    folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Copy the following routable page components from the `Northwind.BlazorServer`
    project''s `Pages` folder to the `Northwind.BlazorWasm` `Client` project''s `Pages`
    folder:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`CreateCustomer.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Customers.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`DeleteCustomer.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`EditCustomer.razor`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: In the `Client` project, create a `Data` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Copy the `INorthwindService.cs` file from the `Northwind.BlazorServer` project's
    `Data` folder into the `Client` project's `Data` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the `Data` folder, add a new file named `NorthwindService.cs`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify its contents to implement the `INorthwindService` interface by using
    an `HttpClient` to call the customers Web API service, as shown in the following
    code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE54]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: In `Program.cs`, import the `Packt.Shared` and `Northwind.BlazorWasm.Client.Data`
    namespaces.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the section for configuring services, add a statement to register the Northwind
    dependency service, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE55]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Testing the Blazor WebAssembly components and service
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we can start the Blazor WebAssembly server hosting project to test if the
    components work with the abstracted Northwind service that calls the customers
    Web API service:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Server` project/folder, start the `Northwind.BlazorWasm.Server` website
    project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome, show **Developer Tools**, and select the **Network** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/`. Your port number will be different since
    it is randomly assigned. View the console output to discover what it is.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Console** tab and note that Blazor WebAssembly has loaded .NET
    assemblies into the browser cache and that they take about 10 MB of space, as
    shown in *Figure 17.8*:![](img/B17442_19_09.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.8: Blazor WebAssembly loading .NET assemblies into the browser cache'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Select the **Network** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Customers Worldwide** and note the HTTP
    `GET` request with the JSON response containing all customers, as shown in *Figure
    17.9*:![](img/B17442_19_10.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.9: The HTTP GET request with the JSON response containing all customers'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click the **+ Create New** button, complete the form to add a new customer as
    before, and note the HTTP `POST` request made, as shown in *Figure 17.10*:![](img/B17442_19_11.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.10: The HTTP POST request for creating a new customer'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Repeat the steps as before to edit and then delete the newly created customer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Improving Blazor WebAssembly apps
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are common ways to improve Blazor WebAssembly apps. We'll look at some
    of the most popular ones now.
  prefs: []
  type: TYPE_NORMAL
- en: Enabling Blazor WebAssembly AOT
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: By default, the .NET runtime used by Blazor WebAssembly is doing IL interpretation
    using an interpreter written in WebAssembly. Unlike other .NET apps, it does not
    use a just-in-time (JIT) compiler, so the performance of CPU-intensive workloads
    is lower than you might hope for.
  prefs: []
  type: TYPE_NORMAL
- en: In .NET 6, Microsoft has added support for **ahead-of-time** (**AOT**) compilation,
    but you must explicitly opt-in because although it can dramatically improve runtime
    performance, AOT compilation can take several minutes on small projects like the
    ones in this book and potentially much longer for larger projects. The size of
    the compiled app is also larger than without AOT—typically twice the size. The
    decision to use AOT is therefore based on a balance of increased compile and browser
    download times, with potentially much faster runtimes.
  prefs: []
  type: TYPE_NORMAL
- en: AOT was the top requested feature in a Microsoft survey, and the lack of AOT
    was cited as a primary reason why some developers had not yet adopted .NET for
    developing **single-page applications** (**SPAs**).
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s install the additional required workload for Blazor AOT named **.NET
    WebAssembly build tools** and then enable AOT for our Blazor WebAssembly project:'
  prefs: []
  type: TYPE_NORMAL
- en: 'In the command prompt or terminal with admin rights, install the Blazor AOT
    workload, as shown in the following command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE56]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Note the messages, as shown in the following partial output:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE57]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Modify the `Northwind.BlazorWasm.Client` project file to enable AOT, as shown
    highlighted in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE58]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Publish the `Northwind.BlazorWasm.Client` project, as shown in the following
    command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE59]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Note that 75 assemblies have AOT applied, as shown in the following partial
    output:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE60]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Wait for the process to finish. The process can take around 20 minutes even
    on a modern multi-core CPU.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the `Northwind.BlazorWasm\Client\bin\release\net6.0\publish` folder
    and note the increased size of the download from 10 MB to 112 MB.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Without AOT, the downloaded Blazor WebAssembly app took about 10 MB of space.
    With AOT, it took about 112 MB. This increase in size will affect a website visitor's
    experience.
  prefs: []
  type: TYPE_NORMAL
- en: The use of AOT is a balance between slower initial download and faster potential
    execution. Depending on the specifics of your app, AOT might not be worth it.
  prefs: []
  type: TYPE_NORMAL
- en: Exploring Progressive Web App support
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**Progressive Web App (PWA)** support in Blazor WebAssembly projects means
    that the web app gains the following benefits:'
  prefs: []
  type: TYPE_NORMAL
- en: It acts as a normal web page until the visitor explicitly decides to progress
    to a full app experience.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: After the app is installed, launch it from the OS's start menu or desktop.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It visually appears in its own app window instead of a browser tab.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It works offline.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It automatically updates.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let us see PWA support in action:'
  prefs: []
  type: TYPE_NORMAL
- en: Start the `Northwind.BlazorWasm.Server` web host project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to `https://localhost:5001/` or whatever your port number is.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In Chrome, in the address bar on the right, click the icon with the tooltip
    **Install Northwind.BlazorWasm**, as shown in *Figure 17.11*:![](img/B17442_19_13.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.11: Installing Northwind.BlazorWasm as an app'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click the **Install** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome. You might also need to close the app if it runs automatically.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Launch the **Northwind.BlazorWasm** app from your Windows Start menu or macOS
    Launchpad and note that it has a full app experience.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the right of the title bar, click the three dots menu and note that you can
    uninstall the app, but do not do so yet.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to **Developer Tools**. On Windows, press F12 or Ctrl + Shift + I.
    On macOS, press Cmd + Shift + I.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Network** tab and then, in the **Throttling** dropdown, select
    the **Offline** preset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the left navigation menu, click **Home** and then click **Customers Worldwide**,
    and note the failure to load any customers and the error message at the bottom
    of the app window, as shown in *Figure 17.12*:![](img/B17442_19_15.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.12: Failure to load any customers when the network is offline'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'In **Developer Tools**, set **Throttling** back to **Disabled: No throttling**.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Reload** link in the yellow error bar at the bottom of the app and
    note that functionality returns.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You could now uninstall the PWA app or just close it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Implementing offline support for PWAs
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: We could improve the experience by caching HTTP `GET` responses from the Web
    API service locally, storing new, modified, or deleted customers locally, and
    then synchronizing with the server later by making the stored HTTP requests once
    network connectivity is restored. But that takes a lot of effort to implement
    well, so it is beyond the scope of this book.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding the browser compatibility analyzer for Blazor WebAssembly
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: With .NET 6, Microsoft has unified the .NET library for all workloads. However,
    although in theory, this means that a Blazor WebAssembly app has full access to
    all .NET APIs, in practice, it runs inside a browser sandbox so there are limitations.
    If you call an unsupported API, this will throw a `PlatformNotSupportedException`.
  prefs: []
  type: TYPE_NORMAL
- en: To be forewarned about unsupported APIs, you can add a platform compatibility
    analyzer that will warn you when your code uses APIs that are not supported by
    browsers.
  prefs: []
  type: TYPE_NORMAL
- en: '**Blazor WebAssembly App** and **Razor Class Library** project templates automatically
    enable browser compatibility checks.'
  prefs: []
  type: TYPE_NORMAL
- en: 'To manually activate browser compatibility checks, for example, in a **Class
    Library** project, add an entry to the project file, as shown in the following
    markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE61]'
  prefs: []
  type: TYPE_PRE
- en: 'Microsoft decorates unsupported APIs, as shown in the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE62]'
  prefs: []
  type: TYPE_PRE
- en: '**Good Practice**: If you create libraries that should not be used in Blazor
    WebAssembly apps, then you should decorate your APIs in the same way.'
  prefs: []
  type: TYPE_NORMAL
- en: Sharing Blazor components in a class library
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We currently have components duplicated in a Blazor Server project and a Blazor
    WebAssembly project. It would be better to have them defined once in a class library
    project and reference them from the two other Blazor projects.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s create a new Razor class library:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Use your preferred code editor to add a new project, as defined in the following
    list:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project template: **Razor Class Library** / `razorclasslib`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Workspace/solution file and folder: `PracticalApps`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Project file and folder: `Northwind.Blazor.Customers`'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Support pages and views: checked'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: In the `Northwind.Blazor.Customers` project, add a project reference to the
    `Northwind.Common.EntityModels.Sqlite` or `SqlServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the `Northwind.Blazor.Customers` project, add an entry to check browser
    compatibility, as shown highlighted in the following markup:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE63]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: In the `Northwind.BlazorServer` project, add a project reference to the `Northwind.Blazor.Customers`
    project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Build the `Northwind.BlazorServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the `Northwind.Blazor.Customers` project, delete the `Areas` folder and all
    its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Copy the `_Imports.razor` file from the root of the `Northwind.BlazorServer`
    project to the root of the `Northwind.Blazor.Customers` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In `_Imports.razor`, delete the two imports for the `Northwind.BlazorServer`
    namespace and add a statement to import the namespace that will contain our shared
    Blazor components, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE64]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Create three folders named `Data`, `Pages`, and `Shared`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Move `INorthwindService.cs` from the `Northwind.BlazorServer` project's `Data`
    folder to the `Northwind.Blazor.Customers` project's `Data` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Move all the components from the `Northwind.BlazorServer` project's `Shared`
    folder to the `Northwind.Blazor.Customers` project's `Shared` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Move the `CreateCustomer.razor`, `Customers.razor`, `EditCustomer.razor`, and
    `DeleteCustomer.razor` components from the `Northwind.BlazorServer` project's
    `Pages` folder to the `Northwind.Blazor.Customers` project's `Pages` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We will leave the other page components because they have dependencies on the
    weather service that has not been properly refactored.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'In the `Northwind.BlazorServer` project, in `_Imports.razor`, remove the `using`
    statement for `Northwind.BlazorServer.Shared` and add statements to import the
    page and shared components in the class library, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE65]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Northwind.BlazorServer` project, in `App.razor`, add a parameter to
    tell the `Router` component to scan the additional assembly to set up the routes
    for the page components in the class library, as shown highlighted in the following
    code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE66]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '**Good Practice**: It does not matter which class you specify as long as it
    is in the external assembly. I chose `Customers` since it is the most important
    and obvious component class.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Start the `Northwind.BlazorServer` project and note that it has the same behavior
    as before.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Good Practice**: You can now reuse the Blazor components in other Blazor
    Server projects. However, you cannot use that class library in Blazor WebAssembly
    projects because it has a dependency on the full ASP.NET Core workload. Creating
    Blazor component libraries that work with both hosting models is beyond the scope
    of this book.'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Interop with JavaScript
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: By default, Blazor components do not have access to browser capabilities like
    local storage, geolocation, and media capture, or any JavaScript libraries like
    React or Vue. If you need to interact with them, you can use JavaScript Interop.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s see an example that uses the browser window''s alert box and local storage
    that can persist up to 5 MB of data per visitor indefinitely:'
  prefs: []
  type: TYPE_NORMAL
- en: In the `Northwind.BlazorServer` project, in the `wwwroot` folder, add a folder
    named `scripts`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the `scripts` folder, add a file named `interop.js`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Modify its contents, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE67]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, in `_Layout.cshtml`, after the `script` element that
    adds Blazor Server support, add a `script` element that references the JavaScript
    file that you just created, as shown in the following code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE68]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'In the `Pages` folder, in `Index.razor`, delete the two `Customers` component
    instances and then add a button and a code block that uses the Blazor JavaScript
    runtime dependency service to call a JavaScript function, as shown in the following
    code:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE69]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Start the `Northwind.BlazorServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome and navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the home page, in the textbox, enter `red` and then click the **Set Color**
    button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Show **Developer Tools**, select the **Application** tab, expand **Local Storage**,
    select `https://localhost:5001`, and note the key-value pair `color-red`, as shown
    in *Figure 17.13*:![](img/B17442_19_16.png)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Figure 17.13: Storing a color in browser local storage using JavaScript Interop'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start the `Northwind.BlazorServer` project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Start Chrome and navigate to `https://localhost:5001/`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the home page, click the **Get Color** button and note that the value `red`
    is shown in the textbox, retrieved from local storage between visitor sessions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close Chrome and shut down the web server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Libraries of Blazor components
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There are many libraries of Blazor components. Paid component libraries are
    from companies like Telerik, DevExpress, and Syncfusion. Open source Blazor component
    libraries include the following:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Radzen Blazor Components: [https://blazor.radzen.com/](https://blazor.radzen.com/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Awesome Open Source Blazor Projects: [https://awesomeopensource.com/projects/blazor](https://awesomeopensource.com/projects/blazor)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Practicing and exploring
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Test your knowledge and understanding by answering some questions, get some
    hands-on practice, and explore this chapter's topics with deeper research.
  prefs: []
  type: TYPE_NORMAL
- en: Exercise 17.1 – Test your knowledge
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Answer the following questions:'
  prefs: []
  type: TYPE_NORMAL
- en: What are the two primary hosting models for Blazor, and how are they different?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In a Blazor Server website project, compared to an ASP.NET Core MVC website
    project, what extra configuration is required in the Startup class?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: One of the benefits of Blazor is being able to implement client-side components
    using C# and .NET instead of JavaScript. Does a Blazor component need any JavaScript?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In a Blazor project, what does the `App.razor` file do?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is a benefit of using the `<NavLink>` component?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How can you pass a value into a component?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is a benefit of using the `<EditForm>` component?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How can you execute some statements when parameters are set?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How can you execute some statements when a component appears?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What are two key differences in the `Program` class between a Blazor Server
    and Blazor WebAssembly project?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Exercise 17.2 – Practice by creating a times table component
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Create a component that renders a times table based on a parameter named `Number`
    and then test your component in two ways.
  prefs: []
  type: TYPE_NORMAL
- en: 'First, by adding an instance of your component to the `Index.razor` file, as
    shown in the following markup:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE70]'
  prefs: []
  type: TYPE_PRE
- en: 'Second, by entering a path in the browser address bar, as shown in the following
    link:'
  prefs: []
  type: TYPE_NORMAL
- en: '`https://localhost:5001/timestable/6`'
  prefs: []
  type: TYPE_NORMAL
- en: Exercise 17.3 – Practice by creating a country navigation item
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Add an action method to the `CustomersController` class to return a list of
    country names.
  prefs: []
  type: TYPE_NORMAL
- en: In the shared `NavMenu` component, call the customer's web service to get the
    list of country names and loop through them, creating a menu item for each country.
  prefs: []
  type: TYPE_NORMAL
- en: Exercise 17.4 – Explore topics
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Use the links on the following page to learn more detail about the topics covered
    in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://github.com/markjprice/cs10dotnet6/blob/main/book-links.md#chapter-17---building-user-interfaces-using-blazor](https://github.com/markjprice/cs10dotnet6/blob/main/book-links.md#chapter-17---building-user-interfaces-using-blazor)'
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you learned how to build Blazor components hosted for both
    Server and WebAssembly. You saw some of the key differences between the two hosting
    models, like how data should be managed using dependency services.
  prefs: []
  type: TYPE_NORMAL
